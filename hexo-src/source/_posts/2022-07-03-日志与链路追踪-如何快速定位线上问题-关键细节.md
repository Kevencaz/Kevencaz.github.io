---
title: 日志与链路追踪：如何快速定位线上问题｜关键细节
date: 2022-07-03 23:45:57
tags:
- 可观测性
- 后端
---

![illustration](/images/illustrations/radar.svg)

> 日志不是堆在一起，而是要能串起来。

<!-- more -->

这篇面向正在扩张的团队，从稳定性视角拆解日志与链路追踪，目标是降低故障率并缩短恢复时间。

我们先统一指标（SLA/MTTR/错误率），再把动作拆成可验证步骤。

## 问题拆分

当问题跨服务时，单点日志很难还原现场。结构化日志与 Trace ID 是排障的核心。

当团队是正在扩张的团队规模时，问题往往不是“不会做”，而是“难以复用”。

## 设计原则

- 目标清晰：围绕SLA/MTTR/错误率建立一致口径
- 拆分步骤可验证、可回滚
- 权衡边界：避免缺少降级兜底引发雪崩

## 分步实施

- 所有服务输出结构化日志，字段一致。
- 请求入口生成 Trace ID，贯穿链路。
- 对高频接口做采样与聚合分析。

## 关键细节

在执行日志与链路追踪时，建议把日志和监控作为“第二视角”，及时发现偏差。

如果资源有限，优先把降低故障率并缩短恢复时间放在最靠近用户的路径上。

## 常见误区

- 日志字段不统一导致不可检索
- 无 trace 导致跨服务断链
- 报警太多无法分级

## 下一步建议

- 把小步快跑 + 日常回滚演练固定为节奏约束，形成习惯
- 补齐工具链：分析：SQL/BI 报表 + 缓存：Redis/Cloudflare
- 为关键环节写一份可复用的检查清单

## Checklist

- Trace ID 全链路透传
- 日志可检索且有字段约束
- 告警分级与抑制策略
