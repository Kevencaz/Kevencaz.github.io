---
title: 用 Git 把个人项目管理好：分支、提交与回滚｜落地路径
date: 2022-01-09 01:41:08
tags:
- Git
- 工程化
---

> 把项目当成产品管理，分支策略就是你的时间轴。

<!-- more -->

## 场景与痛点

这篇文章面向独立开发者，从性能视角深入拆解用 Git 把个人项目管理好。当前定位为「进阶」阶段，核心目标是稳定可复用，开始处理边界。我们会从实际场景出发，结合具体代码示例，把关键知识点拆解为可落地的行动步骤。衡量标准：P95/P99 延迟。

很多开发者在个人项目中不重视版本管理，觉得"就自己一个人用，随便提交就行"。但当项目规模增长、需要回溯某个决策、或者想在多台设备间同步时，混乱的提交历史会让你寸步难行。Git 不只是团队协作工具，它更是个人项目的"时间机器"。一个清晰的提交历史，就像一本项目日记，记录了每一次思考和决策。

当团队规模是独立开发者时，最大的挑战不是"不会做"，而是"做了但不可复用、不可追溯"。在从 0 到 1 的新项目的背景下，我们需要一套既轻量又可靠的方案。

## 核心原理

为什么个人项目也需要规范的 Git 工作流？答案很简单：你未来的自己就是你的"队友"。三个月后回看代码，如果提交信息全是"update"和"fix"，你根本无法理解当时的上下文。好的分支策略能让你同时推进多个想法而互不干扰，好的提交规范能让你快速定位任何一次改动的原因。

## 分步实施指南

首先，确立主干保护原则：main 分支始终保持可运行状态，所有开发在功能分支上进行。分支命名采用 feat/xxx、fix/xxx、refactor/xxx 的前缀约定，一眼就能看出分支目的。每个功能分支的生命周期控制在 1-3 天，避免长期分支带来的合并冲突。

提交信息遵循 Conventional Commits 规范：类型(范围): 描述。比如 feat(auth): add JWT token refresh、fix(api): handle timeout in retry logic。这不仅让历史可读，还能自动生成 CHANGELOG。

对于重要的里程碑，使用 git tag 标记版本号。当需要回退时，优先使用 git revert 而非 git reset，因为 revert 会保留完整的操作历史，让回退本身也是可追溯的。

## 实战代码

以下代码片段经过简化，可以直接用于项目中：

```bash
# 创建功能分支
git switch -c feat/user-auth

# 开发完成后，规范提交
git add .
git commit -m "feat(auth): implement login with email verification"

# 合并回主干
git switch main
git merge --no-ff feat/user-auth
git tag v1.2.0 -m "Release: user authentication"

# 如果需要回退
git revert HEAD --no-edit
git push origin main --tags
```

## 进阶实践

实际操作中，建议配置 .gitignore 模板（可以用 gitignore.io 生成），设置 git hooks 做提交前检查（比如 lint-staged + husky），以及定期用 git log --oneline --graph 审视分支结构。如果你用 VS Code，GitLens 插件能让历史浏览变得非常直观。

## 踩坑记录

最常见的错误是在 main 分支上直接开发，导致半成品代码混入主干。其次是提交粒度不当——要么一个提交包含了十几个文件的改动，要么每改一行就提交一次。理想的提交粒度是"一个逻辑完整的改动"，比如"添加用户注册表单验证"而不是"改了几个文件"。另一个常见问题是忘记推送到远程，本地硬盘一坏，所有历史都没了。

## 下一步行动

如果你正处于进阶阶段，建议先把核心链路的P95/P99 延迟监控建立起来，然后按照上面的步骤逐项推进。记住，缩短响应路径，降低等待时间不是一蹴而就的，而是持续迭代的过程。每次改进后都要回看数据，确认效果符合预期。
