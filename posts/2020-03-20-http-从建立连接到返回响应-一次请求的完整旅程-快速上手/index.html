<!DOCTYPE html><html lang="zh-CN"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Technology Stack"><title>HTTP ä»å»ºç«‹è¿æ¥åˆ°è¿”å›å“åº”ï¼šä¸€æ¬¡è¯·æ±‚çš„å®Œæ•´æ—…ç¨‹ï½œå¿«é€Ÿä¸Šæ‰‹ | Mystwood</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="stylesheet" href="/styles/global.css"><link rel="stylesheet" href="/_astro/Gitalk.B4AMVcrv.css">
<style>#gitalk-container{margin-top:60px;padding:20px;background:#0a0e1799;border:1px solid rgba(0,240,255,.2);border-radius:8px}.gt-container{color:#e0e0e0!important}.gt-container .gt-header-textarea{background:#0a0e17cc!important;border:1px solid rgba(0,240,255,.3)!important;color:#e0e0e0!important}.gt-container .gt-header-textarea:focus{border-color:var(--primary)!important;box-shadow:0 0 10px #00f0ff4d!important}.gt-container .gt-btn{background:linear-gradient(135deg,var(--primary),var(--primary-dark))!important;border:none!important;color:#fff!important;transition:all .3s ease!important}.gt-container .gt-btn:hover{box-shadow:0 0 15px #00f0ff80!important;transform:translateY(-2px)}.gt-container .gt-btn-preview{background:#b44aff33!important;border:1px solid rgba(180,74,255,.5)!important;color:var(--secondary)!important}.gt-container .gt-comment-content{background:#0a0e1799!important;border:1px solid rgba(0,240,255,.1)!important;color:#e0e0e0!important}.gt-container .gt-comment-content:hover{box-shadow:0 0 10px #00f0ff33!important}.gt-container a{color:var(--primary)!important}.gt-container a:hover{color:var(--secondary)!important}.gt-container .gt-comment-username{color:var(--primary)!important;font-weight:600!important}.gt-container .gt-comment-date{color:#888!important}.gt-container .gt-svg svg{fill:var(--primary)!important}.gt-container .gt-comment-admin .gt-comment-content{border-left:3px solid var(--primary)!important}
</style></head> <body> <div class="reading-progress" id="reading-progress"></div> <script type="module">const n=document.getElementById("reading-progress");n&&window.addEventListener("scroll",()=>{const e=document.documentElement.scrollHeight-window.innerHeight,t=e>0?window.scrollY/e*100:0;n.style.width=`${t}%`});</script> <div class="layout"> <aside class="sidebar"> <div class="sidebar-inner"> <div class="site-author"> <a href="/"> <img class="avatar" src="/images/header.png" alt="Keven" width="96" height="96"> </a> <h2 class="author-name">Keven</h2> <p class="site-subtitle" id="typing-subtitle"></p> </div> <nav class="site-nav"> <a href="/" class="nav-item"> <span class="nav-icon">ğŸ </span> <span>é¦–é¡µ</span> </a><a href="/archives/" class="nav-item"> <span class="nav-icon">ğŸ“¦</span> <span>å½’æ¡£</span> </a><a href="/tags/" class="nav-item"> <span class="nav-icon">ğŸ·ï¸</span> <span>æ ‡ç­¾</span> </a><a href="/categories/" class="nav-item"> <span class="nav-icon">ğŸ“‚</span> <span>åˆ†ç±»</span> </a><a href="/games/" class="nav-item"> <span class="nav-icon">ğŸ®</span> <span>å°æ¸¸æˆ</span> </a> </nav> <div class="sidebar-footer"> <a href="https://github.com/Kevencaz" target="_blank" rel="noopener" class="github-link">
GitHub â†—
</a> </div> </div> </aside> <div class="main-wrapper"> <main class="main-content">  <article class="post-detail"> <header class="post-header"> <h1 class="post-title" style="background:linear-gradient(135deg,var(--primary),var(--primary-dark));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;"> HTTP ä»å»ºç«‹è¿æ¥åˆ°è¿”å›å“åº”ï¼šä¸€æ¬¡è¯·æ±‚çš„å®Œæ•´æ—…ç¨‹ï½œå¿«é€Ÿä¸Šæ‰‹ </h1> <div class="post-meta"> <time datetime="2020-03-20T06:40:27.000Z">2020/03/20</time> <span class="post-tags"> <a href="/tags/HTTP/" class="tag">#HTTP</a><a href="/tags/ç½‘ç»œ/" class="tag">#ç½‘ç»œ</a> </span> </div> </header> <div class="post-body"> <blockquote>
<p>æŠŠé“¾è·¯æ‹†æˆé˜¶æ®µçœ‹ï¼Œæ€§èƒ½ç“¶é¢ˆä¼šéå¸¸æ¸…æ™°ã€‚</p>
</blockquote>
<!-- more -->
<h2 id="åœºæ™¯ä¸ç—›ç‚¹">åœºæ™¯ä¸ç—›ç‚¹</h2>
<p>è¿™ç¯‡æ–‡ç« é¢å‘ç‹¬ç«‹å¼€å‘è€…ï¼Œä»æ€§èƒ½è§†è§’æ·±å…¥æ‹†è§£HTTP ä»å»ºç«‹è¿æ¥åˆ°è¿”å›å“åº”ã€‚å½“å‰å®šä½ä¸ºã€Œå…¥é—¨ã€é˜¶æ®µï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯å»ºç«‹åŸºæœ¬æ¦‚å¿µä¸æœ€å°é—­ç¯ã€‚æˆ‘ä»¬ä¼šä»å®é™…åœºæ™¯å‡ºå‘ï¼Œç»“åˆå…·ä½“ä»£ç ç¤ºä¾‹ï¼ŒæŠŠå…³é”®çŸ¥è¯†ç‚¹æ‹†è§£ä¸ºå¯è½åœ°çš„è¡ŒåŠ¨æ­¥éª¤ã€‚è¡¡é‡æ ‡å‡†ï¼šP95/P99 å»¶è¿Ÿã€‚</p>
<p>å½“ä½ åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ä¸€ä¸ª URL å¹¶æŒ‰ä¸‹å›è½¦ï¼ŒèƒŒåå‘ç”Ÿçš„äº‹æƒ…è¿œæ¯”ä½ æƒ³è±¡çš„å¤æ‚ã€‚ä» DNS è§£æåˆ° TCP æ¡æ‰‹ï¼Œä» TLS åå•†åˆ° HTTP è¯·æ±‚å‘é€ï¼Œå†åˆ°æœåŠ¡å™¨å¤„ç†ã€å“åº”ä¼ è¾“ã€æµè§ˆå™¨æ¸²æŸ“â€”â€”æ¯ä¸€ä¸ªç¯èŠ‚éƒ½å¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚ç†è§£è¿™æ¡å®Œæ•´é“¾è·¯ï¼Œæ˜¯åšæ€§èƒ½ä¼˜åŒ–çš„åŸºç¡€ã€‚</p>
<p>å½“å›¢é˜Ÿè§„æ¨¡æ˜¯ç‹¬ç«‹å¼€å‘è€…æ—¶ï¼Œæœ€å¤§çš„æŒ‘æˆ˜ä¸æ˜¯â€ä¸ä¼šåšâ€ï¼Œè€Œæ˜¯â€åšäº†ä½†ä¸å¯å¤ç”¨ã€ä¸å¯è¿½æº¯â€ã€‚åœ¨ä» 0 åˆ° 1 çš„æ–°é¡¹ç›®çš„èƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¥—æ—¢è½»é‡åˆå¯é çš„æ–¹æ¡ˆã€‚</p>
<h2 id="æ ¸å¿ƒåŸç†">æ ¸å¿ƒåŸç†</h2>
<p>å¾ˆå¤šå¼€å‘è€…åœ¨æ’æŸ¥â€é¡µé¢åŠ è½½æ…¢â€çš„é—®é¢˜æ—¶ï¼Œç¬¬ä¸€ååº”æ˜¯ä¼˜åŒ–åç«¯æ¥å£ã€‚ä½†å®é™…ä¸Šï¼Œç½‘ç»œå±‚é¢çš„è€—æ—¶å¾€å¾€å äº†æ€»æ—¶é—´çš„å¤§å¤´ã€‚DNS è§£æå¯èƒ½èŠ± 50-200msï¼ŒTCP æ¡æ‰‹éœ€è¦ä¸€ä¸ª RTTï¼ŒTLS 1.2 è¿˜è¦é¢å¤–ä¸¤ä¸ª RTTã€‚å¦‚æœæœåŠ¡å™¨åœ¨æµ·å¤–ï¼Œå…‰æ˜¯ç½‘ç»œå¾€è¿”å°±å¯èƒ½è¶…è¿‡ 500msã€‚ä¸äº†è§£å®Œæ•´é“¾è·¯ï¼Œä¼˜åŒ–å°±åƒè’™ç€çœ¼ç›å°„ç®­ã€‚</p>
<h2 id="åˆ†æ­¥å®æ–½æŒ‡å—">åˆ†æ­¥å®æ–½æŒ‡å—</h2>
<p>ä¸€æ¬¡å®Œæ•´çš„ HTTP è¯·æ±‚å¯ä»¥æ‹†åˆ†ä¸ºä»¥ä¸‹é˜¶æ®µï¼š</p>
<ol>
<li>DNS è§£æï¼šæµè§ˆå™¨æŸ¥è¯¢åŸŸåå¯¹åº”çš„ IP åœ°å€ï¼Œä¾æ¬¡æ£€æŸ¥æµè§ˆå™¨ç¼“å­˜ã€ç³»ç»Ÿç¼“å­˜ã€è·¯ç”±å™¨ç¼“å­˜ã€ISP DNS æœåŠ¡å™¨ã€‚</li>
<li>TCP è¿æ¥ï¼šé€šè¿‡ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹å¯é è¿æ¥ã€‚å¦‚æœæ˜¯ HTTPSï¼Œè¿˜éœ€è¦ TLS æ¡æ‰‹åå•†åŠ å¯†å‚æ•°ã€‚</li>
<li>è¯·æ±‚å‘é€ï¼šæµè§ˆå™¨æ„é€  HTTP è¯·æ±‚æŠ¥æ–‡ï¼ˆæ–¹æ³•ã€è·¯å¾„ã€å¤´éƒ¨ã€Bodyï¼‰ï¼Œé€šè¿‡å·²å»ºç«‹çš„è¿æ¥å‘é€ã€‚</li>
<li>æœåŠ¡å™¨å¤„ç†ï¼šWeb æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚ï¼Œç»è¿‡è·¯ç”±ã€ä¸­é—´ä»¶ã€ä¸šåŠ¡é€»è¾‘ã€æ•°æ®åº“æŸ¥è¯¢ç­‰å¤„ç†ã€‚</li>
<li>å“åº”ä¼ è¾“ï¼šæœåŠ¡å™¨å°†å“åº”æ•°æ®åˆ†å—ä¼ è¾“å›å®¢æˆ·ç«¯ã€‚</li>
<li>æµè§ˆå™¨æ¸²æŸ“ï¼šè§£æ HTMLã€æ„å»º DOMã€åŠ è½½ CSS/JSã€å¸ƒå±€ç»˜åˆ¶ã€‚</li>
</ol>
<p>æ¯ä¸ªé˜¶æ®µéƒ½æœ‰å¯¹åº”çš„ä¼˜åŒ–æ‰‹æ®µï¼šDNS é¢„è§£æï¼ˆdns-prefetchï¼‰ã€è¿æ¥å¤ç”¨ï¼ˆkeep-aliveï¼‰ã€HTTP/2 å¤šè·¯å¤ç”¨ã€CDN å°±è¿‘è®¿é—®ã€Gzip/Brotli å‹ç¼©ã€æµè§ˆå™¨ç¼“å­˜ç­–ç•¥ç­‰ã€‚</p>
<h2 id="å®æˆ˜ä»£ç ">å®æˆ˜ä»£ç </h2>
<p>ä»¥ä¸‹ä»£ç ç‰‡æ®µç»è¿‡ç®€åŒ–ï¼Œå¯ä»¥ç›´æ¥ç”¨äºé¡¹ç›®ä¸­ï¼š</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#7F848E;font-style:italic"># æŸ¥çœ‹å®Œæ•´è¯·æ±‚å„é˜¶æ®µè€—æ—¶</span></span>
<span class="line"><span style="color:#61AFEF">curl</span><span style="color:#D19A66"> -w</span><span style="color:#98C379"> "DNS:      %{time_namelookup}s\nTCP:      %{time_connect}s\nTLS:      %{time_appconnect}s\nTTFB:     %{time_starttransfer}s\nTotal:    %{time_total}s\nSize:     %{size_download} bytes\n"</span><span style="color:#56B6C2"> \</span></span>
<span class="line"><span style="color:#D19A66">     -o</span><span style="color:#98C379"> /dev/null</span><span style="color:#D19A66"> -s</span><span style="color:#98C379"> https://example.com</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic"># DNS é¢„è§£æ (HTML ä¸­æ·»åŠ )</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic"># &#x3C;link rel="dns-prefetch" href="//api.example.com"></span></span>
<span class="line"><span style="color:#7F848E;font-style:italic"># &#x3C;link rel="preconnect" href="//cdn.example.com"></span></span></code></pre>
<h2 id="è¿›é˜¶å®è·µ">è¿›é˜¶å®è·µ</h2>
<p>ç”¨ Chrome DevTools çš„ Network é¢æ¿å¯ä»¥çœ‹åˆ°æ¯ä¸ªè¯·æ±‚çš„ Timing åˆ†è§£ã€‚curl çš„ -w å‚æ•°ä¹Ÿèƒ½è¾“å‡ºå„é˜¶æ®µè€—æ—¶ã€‚å»ºè®®åœ¨å…³é”®é¡µé¢è®¾ç½® Performance Budgetï¼Œç”¨ Lighthouse CI åœ¨æµæ°´çº¿ä¸­è‡ªåŠ¨æ£€æµ‹ã€‚å¯¹äº API æ¥å£ï¼Œåœ¨ç½‘å…³å±‚è®°å½• TTFBï¼ˆTime To First Byteï¼‰ä½œä¸ºæ ¸å¿ƒç›‘æ§æŒ‡æ ‡ã€‚</p>
<h2 id="è¸©å‘è®°å½•">è¸©å‘è®°å½•</h2>
<p>å¸¸è§è¯¯åŒºåŒ…æ‹¬ï¼šåªå…³æ³¨æ¥å£å“åº”æ—¶é—´è€Œå¿½ç•¥ç½‘ç»œä¼ è¾“è€—æ—¶ï¼›æ²¡æœ‰å¼€å¯ HTTP/2 å¯¼è‡´é˜Ÿå¤´é˜»å¡ï¼›ç¼“å­˜ç­–ç•¥è®¾ç½®ä¸å½“å¯¼è‡´æ¯æ¬¡éƒ½å›æºï¼›CDN é…ç½®äº†ä½†ç¼“å­˜å‘½ä¸­ç‡å¾ˆä½ï¼›ä»¥åŠå¿½ç•¥äº† DNS è§£ææ—¶é—´â€”â€”ç‰¹åˆ«æ˜¯ä½¿ç”¨äº†å¤šä¸ªç¬¬ä¸‰æ–¹åŸŸåçš„é¡µé¢ã€‚</p>
<h2 id="ä¸‹ä¸€æ­¥è¡ŒåŠ¨">ä¸‹ä¸€æ­¥è¡ŒåŠ¨</h2>
<p>å¦‚æœä½ æ­£å¤„äºå…¥é—¨é˜¶æ®µï¼Œå»ºè®®å…ˆæŠŠæ ¸å¿ƒé“¾è·¯çš„P95/P99 å»¶è¿Ÿç›‘æ§å»ºç«‹èµ·æ¥ï¼Œç„¶åæŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤é€é¡¹æ¨è¿›ã€‚è®°ä½ï¼Œç¼©çŸ­å“åº”è·¯å¾„ï¼Œé™ä½ç­‰å¾…æ—¶é—´ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œè€Œæ˜¯æŒç»­è¿­ä»£çš„è¿‡ç¨‹ã€‚æ¯æ¬¡æ”¹è¿›åéƒ½è¦å›çœ‹æ•°æ®ï¼Œç¡®è®¤æ•ˆæœç¬¦åˆé¢„æœŸã€‚</p> </div> </article>  <div id="gitalk-container" data-id="2020-03-20-http-ä»å»ºç«‹è¿æ¥åˆ°è¿”å›å“åº”-ä¸€æ¬¡è¯·æ±‚çš„å®Œæ•´æ—…ç¨‹-å¿«é€Ÿä¸Šæ‰‹" data-title="HTTP ä»å»ºç«‹è¿æ¥åˆ°è¿”å›å“åº”ï¼šä¸€æ¬¡è¯·æ±‚çš„å®Œæ•´æ—…ç¨‹ï½œå¿«é€Ÿä¸Šæ‰‹"></div> <script type="module" src="/_astro/Gitalk.astro_astro_type_script_index_0_lang.Cal0MJAU.js"></script>   <footer class="site-footer"> <div class="footer-inner"> <span>Â© 2019â€“2026 Keven</span> <span class="heart">â¤ï¸</span> <span>Powered by <a href="https://astro.build" target="_blank" rel="noopener">Astro</a></span> </div> <div class="visitor-stats"> <span id="busuanzi_container_site_pv">
ğŸ‘€ æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv">-</span> æ¬¡
</span> <span id="busuanzi_container_site_uv">
ğŸ‘¤ è®¿å®¢æ•° <span id="busuanzi_value_site_uv">-</span> äºº
</span> </div> </footer> </main> </div> </div> <button class="back-to-top" id="back-to-top" aria-label="å›åˆ°é¡¶éƒ¨" title="å›åˆ°é¡¶éƒ¨">â†‘</button> <script type="module">const o=document.getElementById("back-to-top");o&&(window.addEventListener("scroll",()=>{o.classList.toggle("visible",window.scrollY>300)}),o.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}));</script> <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> <script>(function(){const typingTexts = ["Welcome to my blog ğŸš€","è®°å½•å­¦ä¹ ï¼Œåˆ†äº«æˆé•¿ âœ¨","Code Â· Think Â· Create ğŸ’¡"];

    // é¼ æ ‡ç‚¹å‡»çƒŸèŠ±ç‰¹æ•ˆ
    document.addEventListener('click', function(e) {
      const colors = ['#00f0ff','#b44aff','#ff2d95','#39ff14','#ffe600','#00f0ff'];
      for (let i = 0; i < 12; i++) {
        const dot = document.createElement('div');
        dot.style.cssText = `position:fixed;pointer-events:none;width:6px;height:6px;border-radius:50%;z-index:99999;left:${e.clientX}px;top:${e.clientY}px;background:${colors[Math.floor(Math.random()*colors.length)]}`;
        document.body.appendChild(dot);
        const angle = (Math.PI * 2 / 12) * i;
        const velocity = 60 + Math.random() * 60;
        const dx = Math.cos(angle) * velocity;
        const dy = Math.sin(angle) * velocity;
        const x = e.clientX, y = e.clientY;
        let start = null;
        function anim(ts) {
          if (!start) start = ts;
          const p = (ts - start) / 600;
          if (p >= 1) { dot.remove(); return; }
          dot.style.left = (x + dx * p) + 'px';
          dot.style.top = (y + dy * p + 40 * p * p) + 'px';
          dot.style.opacity = String(1 - p);
          dot.style.transform = `scale(${1 - p * 0.5})`;
          requestAnimationFrame(anim);
        }
        requestAnimationFrame(anim);
      }
    });
    // åŠ¨æ€æ‰“å­—å‰¯æ ‡é¢˜
    const el = document.getElementById('typing-subtitle');
    if (el) {
      const texts = typingTexts;
      let ti = 0, ci = 0, deleting = false;
      function tick() {
        const current = texts[ti];
        if (!deleting) {
          el.textContent = current.substring(0, ci + 1);
          ci++;
          if (ci >= current.length) { deleting = true; setTimeout(tick, 1800); return; }
          setTimeout(tick, 80);
        } else {
          el.textContent = current.substring(0, ci - 1);
          ci--;
          if (ci <= 0) { deleting = false; ti = (ti + 1) % texts.length; setTimeout(tick, 400); return; }
          setTimeout(tick, 40);
        }
      }
      tick();
    }
  })();</script> </body> </html>